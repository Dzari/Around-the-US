!function(){"use strict";class e{constructor(e,t,s,a,i){this.data=e,this._cardSelector=t,this._handleImageClick=s,this._handleConfirmDelete=a,this._handleLike=i,this._isLiked=e.isLiked}_setEventListeners(){this._likeButton=this._cardElement.querySelector("#card-like"),this._deletebutton=this._cardElement.querySelector("#card-delete"),this._likeButton.addEventListener("click",(()=>{this._handleCardLike()})),this._deletebutton.addEventListener("click",(()=>{this._handleConfirmDelete(this.data)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this.data)}))}getCardElement(){return this._cardElement=document.querySelector(this._cardSelector).content.cloneNode(!0),this._likeCounter=this._cardElement.querySelector("#card-like-counter"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._card=this._cardElement.querySelector(".card"),this._cardTitle.textContent=this.data.name,this._card.id=this.data._id,this._cardImage.alt=this.data.name,this._cardImage.src=this.data.link,this._setEventListeners(),this._cardElement}_handleCardLike(){"1"===this._likeCounter.textContent?this._handleLike(this,"DELETE"):this._handleLike(this,"PUT")}renderLikes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isLiked;this._isLiked=e,this._isLiked?(this._likeCounter.textContent="1",this._likeButton.classList.add("card__like_liked")):(this._likeCounter.textContent="0",this._likeButton.classList.remove("card__like_liked"))}}class t{constructor(e,t){this._config=e,this._form=t}_checkValidity(e){if(e.validity.valid){const{inputErrorClass:t}=this._config,{errorClass:s}=this._config,a=this._form.querySelector(`#${e.id}-error`);e.classList.remove(t),a.textContent="",a.classList.remove(s)}else{const{inputErrorClass:t}=this._config,{errorClass:s}=this._config,a=this._form.querySelector(`#${e.id}-error`);e.classList.add(t),a.textContent=e.validationMessage,a.classList.add(s)}}enableValidation(){const{inputSelector:e,submitButtonSelector:t}=this._config;this._inputList=[...this._form.querySelectorAll(e)],this._buttonElement=this._form.querySelector(t),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkValidity(e),this.toggleButtonState()}))}))}toggleButtonState(){const{inactiveButtonClass:e}=this._config;(()=>this._inputList.some((e=>!e.validity.valid)))()?(this._buttonElement.classList.add(e),this._buttonElement.setAttribute("disabled","")):(this._buttonElement.classList.remove(e),this._buttonElement.removeAttribute("disabled",""))}}class s{constructor(e,t,s){this._data=e,this._renderer=t,this._container=document.querySelector(s)}renderItems(){this._data.forEach((e=>{this._renderer(e)}))}addItem(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";this._container[t](e)}}class a{constructor(e){this._popupSelector=e,this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("modal_is-opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_is-opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.querySelector(".modal__close-button").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{e.target===e.currentTarget&&this.close()}))}}class i extends a{constructor(e,t){super(e),this.popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._formInputList=[...this.popupForm.querySelectorAll(".modal__form-input")]}setEventListeners(){super.setEventListeners(),this.popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}_getInputValues(){const e={};return this._formInputList.forEach((t=>{const{name:s,value:a}=t;e[s]=a})),e}}const n={formSelector:"-modal-form",inputSelector:".modal__form-input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_disabled",inputErrorClass:"modal__form-input_error",errorClass:"modal__error-message_active"},r=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}async validateAndParse(e){return e.ok?await e.json():Promise.reject()}async getInitialCards(){const e=await fetch(`${this._baseUrl}/cards`,{headers:this._headers});return await this.validateAndParse(e)}async getUserInfo(){const e=await fetch(`${this._baseUrl}/users/me`,{headers:this._headers});return await this.validateAndParse(e)}async patchProfileInfo(e,t){const s=await fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})});return await this.validateAndParse(s)}async addNewCard(e){let{name:t,link:s}=e;const a=await fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})});return await this.validateAndParse(a)}async deleteCard(e){const t=await fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers});return await this.validateAndParse(t)}async likeCard(e){const t=await fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers});return await this.validateAndParse(t)}async removeLike(e){const t=await fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers});return await this.validateAndParse(t)}async changeProfilePicture(e){const t=await fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})});return await this.validateAndParse(t)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"6730a6b1-094e-484e-b754-6ed1376cdeb2","Content-Type":"application/json"}}),o=new class extends a{constructor(e){super(e),this._maxImage=this._popupElement.querySelector("#max-image"),this._maxImageTitle=this._popupElement.querySelector("#max-image-title")}open(e){this._maxImage.src=e.link,this._maxImage.alt=e.name,this._maxImageTitle.textContent=e.name,super.open()}}("#max-image-modal"),l=new i("#edit-profile-modal",(function(e){const t=k.querySelector("#edit-profile-modal-submit-button");t.textContent="Saving...",r.patchProfileInfo(e.name,e.job).then((e=>{u.setUserInfo(e),l.popupForm.reset(),m.toggleButtonState(),l.close()})).catch((e=>{console.log(e)})).finally((()=>{t.textContent="Save"}))})),c=new i("#add-card-modal",(function(e){const t=y.querySelector("#add-card-modal-submit-button");t.textContent="Saving...",r.addNewCard(e).then((e=>{w(e,"prepend"),c.popupForm.reset(),_.toggleButtonState(),c.close()})).catch((e=>{console.log(e)})).finally((()=>{t.textContent="Create"}))})),d=new i("#edit-pic-modal",(function(e){let{link:t}=e;const s=b.querySelector("#edit-pic-modal-submit-button");s.textContent="Saving...",r.changeProfilePicture(t).then((e=>{u.setUserInfo(e),d.close()})).catch((e=>{console.log(e)})).finally((()=>{s.textContent="Save"}))})),h=new i("#confirm-modal",(function(){r.deleteCard(x._id).then((()=>{document.querySelector(`li[id='${x._id}'`).remove()})).catch((e=>{console.log(e)})).finally((()=>{h.close()}))})),u=new class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:a}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s),this._avatarElement=document.querySelector(a)}getUserInfo(){return{name:this._nameElement.textContent,about:this._jobElement.textContent,avatar:this._avatarElement.src}}setUserInfo(e){let{name:t,about:s,avatar:a}=e;this._nameElement.textContent=t,this._jobElement.textContent=s,this._avatarElement.src=a}}({nameSelector:"#profile-name",jobSelector:"#profile-subtitle",avatarSelector:"#profile-photo"}),m=new t(n,l.popupForm),_=new t(n,c.popupForm),p=new t(n,d.popupForm),f=document.querySelector("#edit-profile-modal-open-button"),E=document.querySelector("#add-card-modal-open-button"),v=document.querySelector("#profile-photo"),g=document.querySelector("#edit-profile-name-placeholder"),S=document.querySelector("#edit-profile-subtitle-placeholder"),b=document.querySelector("#edit-pic-modal"),y=document.querySelector("#add-card-modal"),k=document.querySelector("#edit-profile-modal"),C=[o,l,c,d,h],L=[m,_,p];let q;function w(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";const a=new e(t,"#card-template",I,P,U),i=a.getCardElement();a.renderLikes(),q.addItem(i,s)}f.addEventListener("click",(()=>{const e=u.getUserInfo();g.value=e.name,S.value=e.about,m.toggleButtonState(),l.open()})),E.addEventListener("click",(()=>{c.open()})),v.addEventListener("click",(()=>{d.open()}));const I=e=>{o.open(e)};let x;function P(e){h.open(),x=e}function U(e,t){"PUT"===t?r.likeCard(e.data._id).then((()=>{e.renderLikes(!0)})).catch((e=>{console.log(e)})):r.removeLike(e.data._id).then((()=>{e.renderLikes(!1)})).catch((e=>{console.log(e)}))}r.getUserInfo().then((e=>{u.setUserInfo(e)})).catch((e=>{console.log(e)})),r.getInitialCards().then((e=>{q=new s(e,w,"#cards-list"),q.renderItems()})).catch((e=>{console.log(e)})),function(e){e.forEach((e=>{e.setEventListeners()}))}(C),function(e){e.forEach((e=>{e.enableValidation(),e.toggleButtonState()}))}(L)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFXaUQsRUFBS3BMLEtBQUs4QixLQUNyQmlILE1BQUssS0FDSnFDLEVBQUtsSixhQUFZLEVBQU0sSUFFeEJrSCxPQUFPQyxJQUNOQyxRQUFRQyxJQUFJRixFQUFJLEdBR3hCLENBektFM0MsRUFDR2MsY0FDQXVCLE1BQU1vQyxJQUNMbkMsRUFBU0MsWUFBWWtDLEVBQUssSUFFM0IvQixPQUFPQyxJQUNOQyxRQUFRQyxJQUFJRixFQUFJLElBTXBCM0MsRUFDR1ksa0JBQ0F5QixNQUFNc0MsSUFDTE4sRUFBYyxJQUFJM0csRUFBUWlILEVBQU92RCxFQUFZLGVBQzdDaUQsRUFBWXBHLGFBQWEsSUFFMUJ5RSxPQUFPQyxJQUNOQyxRQUFRQyxJQUFJRixFQUFJLElBbkN0QixTQUEyQndCLEdBQ3pCQSxFQUFPaEgsU0FBU3lILElBQ2RBLEVBQU01RixtQkFBbUIsR0FFN0IsQ0E2TEFBLENBQWtCbUYsR0ExTGxCLFNBQTJCQyxHQUN6QkEsRUFBZWpILFNBQVMwSCxJQUN0QkEsRUFBY2hJLG1CQUNkZ0ksRUFBY3pILG1CQUFtQixHQUVyQyxDQXNMQTBILENBQWtCVixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXB3aXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZUNvbmZpcm1EZWxldGUsXHJcbiAgICBoYW5kbGVMaWtlXHJcbiAgKSB7XHJcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVDb25maXJtRGVsZXRlID0gaGFuZGxlQ29uZmlybURlbGV0ZTtcclxuICAgIHRoaXMuX2hhbmRsZUxpa2UgPSBoYW5kbGVMaWtlO1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGRhdGEuaXNMaWtlZDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vQWRkaW5nIExpa2UgYW5kIGRlbGV0ZSBldmVudCBsaXN0ZW5lcnNcclxuXHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWxpa2VcIik7XHJcbiAgICB0aGlzLl9kZWxldGVidXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtZGVsZXRlXCIpO1xyXG5cclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZExpa2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2RlbGV0ZWJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDb25maXJtRGVsZXRlKHRoaXMuZGF0YSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLmRhdGEpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkRWxlbWVudCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB0aGlzLl9saWtlQ291bnRlciA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1saWtlLWNvdW50ZXJcIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIik7XHJcblxyXG4gICAgLy9Bc3NpZ25pbmcgZGF0YSB0byBuZXcgY2xvbmVcclxuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZC5pZCA9IHRoaXMuZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5kYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5kYXRhLmxpbms7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlQ2FyZExpa2UoKSB7XHJcbiAgICBpZiAodGhpcy5fbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPT09IFwiMVwiKSB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2UodGhpcywgXCJERUxFVEVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlKHRoaXMsIFwiUFVUXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyTGlrZXMobGlrZWRWYWx1ZSA9IHRoaXMuX2lzTGlrZWQpIHtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBsaWtlZFZhbHVlO1xyXG4gICAgaWYgKCF0aGlzLl9pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gXCIwXCI7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2VfbGlrZWRcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IFwiMVwiO1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlX2xpa2VkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm0pIHtcclxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrVmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcyB9ID0gdGhpcy5fY29uZmlnO1xyXG4gICAgICBjb25zdCB7IGVycm9yQ2xhc3MgfSA9IHRoaXMuX2NvbmZpZztcclxuICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgICApO1xyXG4gICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChpbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKGVycm9yQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MgfSA9IHRoaXMuX2NvbmZpZztcclxuICAgICAgY29uc3QgeyBlcnJvckNsYXNzIH0gPSB0aGlzLl9jb25maWc7XHJcbiAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICAgKTtcclxuICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoZXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgY29uc3QgeyBpbnB1dFNlbGVjdG9yLCBzdWJtaXRCdXR0b25TZWxlY3RvciB9ID0gdGhpcy5fY29uZmlnO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChpbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrVmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgY29uc3QgeyBpbmFjdGl2ZUJ1dHRvbkNsYXNzIH0gPSB0aGlzLl9jb25maWc7XHJcbiAgICBjb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoaGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3RvcihpdGVtcywgcmVuZGVyZXIsIGNsYXNzU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2RhdGEgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNsYXNzU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9kYXRhLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCwgbWV0aG9kID0gXCJhcHBlbmRcIikge1xyXG4gICAgdGhpcy5fY29udGFpbmVyW21ldGhvZF0oZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9pcy1vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybUlucHV0TGlzdCA9IFtcclxuICAgICAgLi4udGhpcy5wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZm9ybS1pbnB1dFwiKSxcclxuICAgIF07XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2Zvcm1JbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgY29uc3QgeyBuYW1lLCB2YWx1ZSB9ID0gaW5wdXQ7XHJcbiAgICAgIGZvcm1WYWx1ZXNbbmFtZV0gPSB2YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi1tb2RhbC1mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19mb3JtLWlucHV0X2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3ItbWVzc2FnZV9hY3RpdmVcIixcclxufTtcclxuIiwiLy9JbXBvcnRlZCBDbGFzc2VzXG5cbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cHdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy9BUElcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjY3MzBhNmIxLTA5NGUtNDg0ZS1iNzU0LTZlZDEzNzZjZGViMlwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbi8vUG9wdXAgQ2xhc3Nlc1xuY29uc3QgbWF4SW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNtYXgtaW1hZ2UtbW9kYWxcIik7XG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI2VkaXQtcHJvZmlsZS1tb2RhbFwiLFxuICBoYW5kbGVFZGl0UHJvZmlsZVxuKTtcbmNvbnN0IGFkZFBsYWNlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGQtY2FyZC1tb2RhbFwiLCBoYW5kbGVBZGRDYXJkU3VibWl0KTtcblxuY29uc3QgcHJvZmlsZVBpY1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI2VkaXQtcGljLW1vZGFsXCIsXG4gIGhhbmRsZUVkaXRQaWNTdWJtaXRcbik7XG5cbmNvbnN0IGNvbmZpcm1EZWxldGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNjb25maXJtLW1vZGFsXCIsXG4gIGhhbmRsZURlbGV0ZUNhcmRcbik7XG5cbi8vVXNlciBJbmZvIENsYXNzXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIjcHJvZmlsZS1uYW1lXCIsXG4gIGpvYlNlbGVjdG9yOiBcIiNwcm9maWxlLXN1YnRpdGxlXCIsXG4gIGF2YXRhclNlbGVjdG9yOiBcIiNwcm9maWxlLXBob3RvXCIsXG59KTtcblxuLy9Gb3JtIFZhbGlkYXRvciBDbGFzc1xuY29uc3QgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIGNvbmZpZyxcbiAgZWRpdFByb2ZpbGVQb3B1cC5wb3B1cEZvcm1cbik7XG5cbmNvbnN0IGFkZFBsYWNlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICBjb25maWcsXG4gIGFkZFBsYWNlUG9wdXAucG9wdXBGb3JtXG4pO1xuXG5jb25zdCBwcm9maWxlUGljRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICBjb25maWcsXG4gIHByb2ZpbGVQaWNQb3B1cC5wb3B1cEZvcm1cbik7XG5cbi8vT3BlbiBCdXR0b25zXG5cbmNvbnN0IGVkaXRQcm9maWxlTU9CID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjZWRpdC1wcm9maWxlLW1vZGFsLW9wZW4tYnV0dG9uXCJcbik7XG5jb25zdCBhZGRDYXJkTU9CID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbC1vcGVuLWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVQaWMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtcGhvdG9cIik7XG5cbi8vRm9ybSBQbGFjZWhvbGRlcnNcbmNvbnN0IHVzZXJOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZS1uYW1lLXBsYWNlaG9sZGVyXCIpO1xuY29uc3QgdXNlckpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjZWRpdC1wcm9maWxlLXN1YnRpdGxlLXBsYWNlaG9sZGVyXCJcbik7XG5cbi8vTW9kYWxzXG5jb25zdCBlZGl0UHJvZmlsZVBpY01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXBpYy1tb2RhbFwiKTtcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGUtbW9kYWxcIik7XG5cbi8vUG9wdXBzXG5jb25zdCBwb3B1cHMgPSBbXG4gIG1heEltYWdlUG9wdXAsXG4gIGVkaXRQcm9maWxlUG9wdXAsXG4gIGFkZFBsYWNlUG9wdXAsXG4gIHByb2ZpbGVQaWNQb3B1cCxcbiAgY29uZmlybURlbGV0ZVBvcHVwLFxuXTtcblxuLy9Gb3JtIFZhbGlkYXRvcnNcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0gW1xuICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IsXG4gIGFkZFBsYWNlRm9ybVZhbGlkYXRvcixcbiAgcHJvZmlsZVBpY0Zvcm1WYWxpZGF0b3IsXG5dO1xuXG4vL0NhcmQgQ29udGFpbmVyXG5sZXQgY2FyZFNlY3Rpb247XG5cbi8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLy9cbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbi8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLy9cblxuLy9DcmVhdGVzIG5ldyBDYXJkc1xuZnVuY3Rpb24gYWRkTmV3Q2FyZChjYXJkRGF0YSwgbWV0aG9kID0gXCJhcHBlbmRcIikge1xuICBjb25zdCBjYXJkVGVtcGxhdGUgPSBuZXcgQ2FyZChcbiAgICBjYXJkRGF0YSxcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICBoYW5kbGVDb25maXJtRGVsZXRlLFxuICAgIGhhbmRsZUxpa2VDYXJkXG4gICk7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmdldENhcmRFbGVtZW50KCk7XG4gIGNhcmRUZW1wbGF0ZS5yZW5kZXJMaWtlcygpO1xuXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQsIG1ldGhvZCk7XG59XG5cbi8vU2V0cyBldmVudCBMaXN0ZW5lcnNcbmZ1bmN0aW9uIHNldEV2ZW50TGlzdGVuZXJzKHBvcHVwcykge1xuICBwb3B1cHMuZm9yRWFjaCgocG9wdXApID0+IHtcbiAgICBwb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuICB9KTtcbn1cblxuLy9TZXRzIEZvcm0gdmFsaWRhdGlvblxuZnVuY3Rpb24gc2V0Rm9ybVZhbGlkYXRpb24oZm9ybVZhbGlkYXRvcnMpIHtcbiAgZm9ybVZhbGlkYXRvcnMuZm9yRWFjaCgoZm9ybVZhbGlkYXRvcikgPT4ge1xuICAgIGZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICAgIGZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgfSk7XG59XG5cbi8vRmV0Y2hlcyB0aGVuIHNldHMgVXNlciBJbmZvXG5mdW5jdGlvbiBzZXRVc2VySW5mbygpIHtcbiAgYXBpXG4gICAgLmdldFVzZXJJbmZvKClcbiAgICAudGhlbigodXNlcikgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlcik7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbn1cblxuLy9GZXRjaGVzIHRoZW4gc2V0cyBJbml0aWFsIENhcmRzXG5mdW5jdGlvbiBzZXRJbml0aWFsQ2FyZHMoKSB7XG4gIGFwaVxuICAgIC5nZXRJbml0aWFsQ2FyZHMoKVxuICAgIC50aGVuKChjYXJkcykgPT4ge1xuICAgICAgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihjYXJkcywgYWRkTmV3Q2FyZCwgXCIjY2FyZHMtbGlzdFwiKTtcbiAgICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbn1cblxuLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovL1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudCBMaXN0ZW5lcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovL1xuXG4vL1ByZXBhcmVzIGZvcm0gdGhlbiBvcGVucyBwcm9maWxlIGVkaXQgbW9kYWxcbmVkaXRQcm9maWxlTU9CLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IHVzZXIgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICB1c2VyTmFtZUlucHV0LnZhbHVlID0gdXNlci5uYW1lO1xuICB1c2VySm9iSW5wdXQudmFsdWUgPSB1c2VyLmFib3V0O1xuXG4gIGVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vL09wZW5zIG5ldyBDYXJkIE1vZGFsXG5hZGRDYXJkTU9CLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZFBsYWNlUG9wdXAub3BlbigpO1xufSk7XG5cbi8vT3BlbnMgcHJvZmlsZSBwaWN0dXJlIGVkaXQgbW9kYWxcbnByb2ZpbGVQaWMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcHJvZmlsZVBpY1BvcHVwLm9wZW4oKTtcbn0pO1xuXG4vL09wZW5zIG1heCBpbWFnZSBNb2RhbFxuY29uc3QgaGFuZGxlSW1hZ2VDbGljayA9IChjYXJkRGF0YSkgPT4ge1xuICBtYXhJbWFnZVBvcHVwLm9wZW4oY2FyZERhdGEpO1xufTtcblxuLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovL1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudCBIYW5kbGVycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovL1xuXG4vL0hhbmRsZXMgcHJvZmlsZSBlZGl0IHN1Ym1pdFxuZnVuY3Rpb24gaGFuZGxlRWRpdFByb2ZpbGUodXNlckRhdGEpIHtcbiAgY29uc3Qgc3VibWl0QnV0dG9uID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICAgIFwiI2VkaXQtcHJvZmlsZS1tb2RhbC1zdWJtaXQtYnV0dG9uXCJcbiAgKTtcbiAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcblxuICBhcGlcbiAgICAucGF0Y2hQcm9maWxlSW5mbyh1c2VyRGF0YS5uYW1lLCB1c2VyRGF0YS5qb2IpXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcbiAgICAgIGVkaXRQcm9maWxlUG9wdXAucG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XG4gICAgfSk7XG59XG5cbi8vSGFuZGxlcyBuZXcgY2FyZCBzdWJtaXRcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRTdWJtaXQoY2FyZERhdGEpIHtcbiAgY29uc3Qgc3VibWl0QnV0dG9uID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gICAgXCIjYWRkLWNhcmQtbW9kYWwtc3VibWl0LWJ1dHRvblwiXG4gICk7XG4gIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG5cbiAgYXBpXG4gICAgLmFkZE5ld0NhcmQoY2FyZERhdGEpXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgYWRkTmV3Q2FyZChyZXMsIFwicHJlcGVuZFwiKTtcbiAgICAgIGFkZFBsYWNlUG9wdXAucG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgICBhZGRQbGFjZUZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIGFkZFBsYWNlUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJDcmVhdGVcIjtcbiAgICB9KTtcbn1cblxuLy9IYW5kbGVzIGNhcmQgZGVsZXRpb25cbmxldCBjYXJkdG9EZWxldGVEYXRhO1xuXG4vL0hhbmRsZXMgY29uZmlybSBkZWxldGUgYW5kIHNldHMgZGVsZXRlIGRhdGFcbmZ1bmN0aW9uIGhhbmRsZUNvbmZpcm1EZWxldGUoZGF0YSkge1xuICBjb25maXJtRGVsZXRlUG9wdXAub3BlbigpO1xuICBjYXJkdG9EZWxldGVEYXRhID0gZGF0YTtcbn1cblxuLy9EZWxldGVzIGNhcmRcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhcmQoKSB7XG4gIGFwaVxuICAgIC5kZWxldGVDYXJkKGNhcmR0b0RlbGV0ZURhdGEuX2lkKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBsaVtpZD0nJHtjYXJkdG9EZWxldGVEYXRhLl9pZH0nYCk7XG4gICAgICBjYXJkLnJlbW92ZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBjb25maXJtRGVsZXRlUG9wdXAuY2xvc2UoKTtcbiAgICB9KTtcbn1cblxuLy9DaGFuZ2VzIFByb2ZpbGUgUGljdHVyZVxuZnVuY3Rpb24gaGFuZGxlRWRpdFBpY1N1Ym1pdCh7IGxpbmsgfSkge1xuICBjb25zdCBzdWJtaXRCdXR0b24gPSBlZGl0UHJvZmlsZVBpY01vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gICAgXCIjZWRpdC1waWMtbW9kYWwtc3VibWl0LWJ1dHRvblwiXG4gICk7XG4gIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG5cbiAgYXBpXG4gICAgLmNoYW5nZVByb2ZpbGVQaWN0dXJlKGxpbmspXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcbiAgICAgIHByb2ZpbGVQaWNQb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcbiAgICB9KTtcbn1cblxuLy9IYW5kbGVzIGNhcmQgTGlrZVxuZnVuY3Rpb24gaGFuZGxlTGlrZUNhcmQoY2FyZCwgbWV0aG9kKSB7XG4gIGlmIChtZXRob2QgPT09IFwiUFVUXCIpIHtcbiAgICBhcGlcbiAgICAgIC5saWtlQ2FyZChjYXJkLmRhdGEuX2lkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYXJkLnJlbmRlckxpa2VzKHRydWUpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBhcGlcbiAgICAgIC5yZW1vdmVMaWtlKGNhcmQuZGF0YS5faWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQucmVuZGVyTGlrZXMoZmFsc2UpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfVxufVxuXG4vLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8vXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluaXRpYWwgRnVuY3Rpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4vLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8vXG5cbnNldFVzZXJJbmZvKCk7XG5zZXRJbml0aWFsQ2FyZHMoKTtcbnNldEV2ZW50TGlzdGVuZXJzKHBvcHVwcyk7XG5zZXRGb3JtVmFsaWRhdGlvbihmb3JtVmFsaWRhdG9ycyk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICAodGhpcy5fYmFzZVVybCA9IGJhc2VVcmwpLCAodGhpcy5faGVhZGVycyA9IGhlYWRlcnMpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgdmFsaWRhdGVBbmRQYXJzZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIGF3YWl0IHJlcy5qc29uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy52YWxpZGF0ZUFuZFBhcnNlKHJlcyk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy52YWxpZGF0ZUFuZFBhcnNlKHJlcyk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBwYXRjaFByb2ZpbGVJbmZvKG5hbWUsIGFib3V0KSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBhYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBhd2FpdCB0aGlzLnZhbGlkYXRlQW5kUGFyc2UocmVzKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGFkZE5ld0NhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudmFsaWRhdGVBbmRQYXJzZShyZXMpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy52YWxpZGF0ZUFuZFBhcnNlKHJlcyk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy52YWxpZGF0ZUFuZFBhcnNlKHJlcyk7XHJcbiAgfVxyXG5cclxuICBhc3luYyByZW1vdmVMaWtlKGNhcmRJZCkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBhd2FpdCB0aGlzLnZhbGlkYXRlQW5kUGFyc2UocmVzKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGNoYW5nZVByb2ZpbGVQaWN0dXJlKGxpbmspIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy52YWxpZGF0ZUFuZFBhcnNlKHJlcyk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9tYXhJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI21heC1pbWFnZVwiKTtcclxuICAgIHRoaXMuX21heEltYWdlVGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNtYXgtaW1hZ2UtdGl0bGVcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIHRoaXMuX21heEltYWdlLnNyYyA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX21heEltYWdlLmFsdCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX21heEltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVDb25maXJtRGVsZXRlIiwiaGFuZGxlTGlrZSIsInRoaXMiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlQ29uZmlybURlbGV0ZSIsIl9oYW5kbGVMaWtlIiwiX2lzTGlrZWQiLCJpc0xpa2VkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJfY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2RlbGV0ZWJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlQ2FyZExpa2UiLCJfY2FyZEltYWdlIiwiZ2V0Q2FyZEVsZW1lbnQiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfbGlrZUNvdW50ZXIiLCJfY2FyZFRpdGxlIiwiX2NhcmQiLCJ0ZXh0Q29udGVudCIsIm5hbWUiLCJpZCIsIl9pZCIsImFsdCIsInNyYyIsImxpbmsiLCJyZW5kZXJMaWtlcyIsImxpa2VkVmFsdWUiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybSIsIl9jb25maWciLCJfZm9ybSIsIl9jaGVja1ZhbGlkaXR5IiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJlcnJvckVsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVuYWJsZVZhbGlkYXRpb24iLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwiZm9yRWFjaCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImhhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJTZWN0aW9uIiwiaXRlbXMiLCJyZW5kZXJlciIsImNsYXNzU2VsZWN0b3IiLCJfZGF0YSIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsIm1ldGhvZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwicG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybUlucHV0TGlzdCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsImZvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwiZm9ybVNlbGVjdG9yIiwiYXBpIiwiX3JlZiIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsInZhbGlkYXRlQW5kUGFyc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0IiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJnZXRVc2VySW5mbyIsInBhdGNoUHJvZmlsZUluZm8iLCJhYm91dCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWRkTmV3Q2FyZCIsIl9yZWYyIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImxpa2VDYXJkIiwicmVtb3ZlTGlrZSIsImNoYW5nZVByb2ZpbGVQaWN0dXJlIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsIm1heEltYWdlUG9wdXAiLCJfbWF4SW1hZ2UiLCJfbWF4SW1hZ2VUaXRsZSIsImVkaXRQcm9maWxlUG9wdXAiLCJ1c2VyRGF0YSIsInN1Ym1pdEJ1dHRvbiIsImVkaXRQcm9maWxlTW9kYWwiLCJqb2IiLCJ0aGVuIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsInJlc2V0IiwiZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZmluYWxseSIsImFkZFBsYWNlUG9wdXAiLCJjYXJkRGF0YSIsImFkZENhcmRNb2RhbCIsImFkZFBsYWNlRm9ybVZhbGlkYXRvciIsInByb2ZpbGVQaWNQb3B1cCIsImVkaXRQcm9maWxlUGljTW9kYWwiLCJjb25maXJtRGVsZXRlUG9wdXAiLCJjYXJkdG9EZWxldGVEYXRhIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiX2F2YXRhckVsZW1lbnQiLCJwcm9maWxlUGljRm9ybVZhbGlkYXRvciIsImVkaXRQcm9maWxlTU9CIiwiYWRkQ2FyZE1PQiIsInByb2ZpbGVQaWMiLCJ1c2VyTmFtZUlucHV0IiwidXNlckpvYklucHV0IiwicG9wdXBzIiwiZm9ybVZhbGlkYXRvcnMiLCJjYXJkU2VjdGlvbiIsImNhcmRUZW1wbGF0ZSIsImhhbmRsZUxpa2VDYXJkIiwiY2FyZEVsZW1lbnQiLCJ1c2VyIiwiY2FyZCIsImNhcmRzIiwicG9wdXAiLCJmb3JtVmFsaWRhdG9yIiwic2V0Rm9ybVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9